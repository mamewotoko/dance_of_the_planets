language: c
sudo: required
before_install:
  - sudo apt-get update

jobs:
  include:
  - stage: bucklescript
    script:
      - cd bs
      - sudo apt-get install nodejs make
      - npm i
      - ./build.sh
  - stage: ocaml
    script:
      - cd ocaml
      - sudo apt-get install make
      - bash -ex .travis-ocaml.sh
      - eval $(opam env); sh setup-opam
      - make
#
env:
  # only for ocaml
  - OCAML_VERSION=4.02
os:
  - linux
